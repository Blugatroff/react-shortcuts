{"version":3,"file":"react-shortcuts.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["import React from 'react'\n\ntype UpperCase = 'A' | 'B' | 'C' | 'D' | 'E' | 'F' | 'G' | 'H' | 'I' | 'J' | 'K' | 'L' | 'M' | 'N' | 'O' | 'P' | 'Q' | 'R' | 'S' | 'T' | 'U' | 'V' | 'W' | 'X' | 'Y' | 'Z'\ntype LowerCase = 'a' | 'b' | 'c' | 'd' | 'e' | 'f' | 'g' | 'h' | 'i' | 'j' | 'k' | 'l' | 'm' | 'n' | 'o' | 'p' | 'q' | 'r' | 's' | 't' | 'u' | 'v' | 'w' | 'x' | 'y' | 'z'\ntype Alphabet = LowerCase | UpperCase\ntype ShiftNum = '!' | '@' | '#' | '$' | '%' | '^' | '&' | '*' | '(' | ')'\ntype FKeys = 'F1' | 'F2' | 'F3' | 'F4' | 'F5' | 'F6' | 'F7' | 'F8' | 'F9' | 'F10' | 'F11' | 'F12'\ntype SpecialKeys = 'Control' | 'Alt' | 'Backspace' | 'Tab' | 'Shift' | 'Enter' | 'End'\ntype Arrows = 'ArrowUp' | 'ArrowDown' | 'ArrowRight' | 'ArrowLeft'\ntype Key = Alphabet | FKeys | SpecialKeys | Arrows | ShiftNum\n\nclass KeysState {\n  private keys: Map<string, boolean> = new Map()\n\n  public isPressed(key: Key): boolean {\n    return this.keys.get(key) ?? false\n  }\n  public update(e: KeyboardEvent, state: boolean) {\n    this.keys.set(e.key, state)\n  }\n}\n\ntype Listener = (keys: KeysState) => void\nconst listeners: Map<string, Listener[]> = new Map()\n\nconst addListener = (key: Key, listener: Listener): (() => void) => {\n  const listenersOnKey = listeners.get(key) ?? []\n  listeners.set(key, [...listenersOnKey, listener])\n  return () => {\n    const listenersOnKey = listeners.get(key)\n    if (listenersOnKey === undefined) return\n    listeners.set(key, listenersOnKey.filter(f => f !== listener))\n  }\n}\n\nconst keysState = new KeysState()\ndocument.body.onkeydown = e => {\n  keysState.update(e, true)\n  for (const listener of listeners.get(e.key) ?? []) listener(keysState)\n}\ndocument.body.onkeyup = e => keysState.update(e, false)\n\nconst useKey = (key: Key, listener: Listener) =>\n  React.useEffect(\n    () => addListener(key, listener),\n    [listener, key]\n  )\n\nexport const createShortcutHook = (keys: Key[]) => (listener: () => void): void => {\n  useKey(keys[keys.length - 1], React.useMemo(() => state => {\n    for (let i = 0; i < keys.length - 1; i++) {\n      if (!state.isPressed(keys[i])) return\n    }\n    listener()\n  }, [listener]))\n}\n\nexport const anyShortcut = (...hooks: ((listener: (() => void)) => void)[]) => (listener: () => void) => hooks.forEach(h => h(listener))\n"],"names":["KeysState","Map","isPressed","key","keys","get","update","e","state","set","listeners","addListener","listener","listenersOnKey","undefined","filter","f","keysState","document","body","onkeydown","onkeyup","useKey","React","useEffect","createShortcutHook","length","useMemo","i","anyShortcut","hooks","forEach","h"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAWMA;EAAN;IACU,SAAA,GAA6B,IAAIC,GAAJ,EAA7B;;;;;SAEDC,YAAA,mBAAUC,GAAV;;;IACL,yBAAO,KAAKC,IAAL,CAAUC,GAAV,CAAcF,GAAd,CAAP,6BAA6B,KAA7B;;;SAEKG,SAAA,gBAAOC,CAAP,EAAyBC,KAAzB;IACL,KAAKJ,IAAL,CAAUK,GAAV,CAAcF,CAAC,CAACJ,GAAhB,EAAqBK,KAArB;;;;;;AAKJ,IAAME,SAAS,gBAA4B,IAAIT,GAAJ,EAA3C;;AAEA,IAAMU,WAAW,GAAG,SAAdA,WAAc,CAACR,GAAD,EAAWS,QAAX;;;EAClB,IAAMC,cAAc,qBAAGH,SAAS,CAACL,GAAV,CAAcF,GAAd,CAAH,6BAAyB,EAA7C;EACAO,SAAS,CAACD,GAAV,CAAcN,GAAd,YAAuBU,cAAvB,GAAuCD,QAAvC;EACA,OAAO;IACL,IAAMC,cAAc,GAAGH,SAAS,CAACL,GAAV,CAAcF,GAAd,CAAvB;IACA,IAAIU,cAAc,KAAKC,SAAvB,EAAkC;IAClCJ,SAAS,CAACD,GAAV,CAAcN,GAAd,EAAmBU,cAAc,CAACE,MAAf,CAAsB,UAAAC,CAAC;MAAA,OAAIA,CAAC,KAAKJ,QAAV;KAAvB,CAAnB;GAHF;AAKD,CARD;;AAUA,IAAMK,SAAS,gBAAG,IAAIjB,SAAJ,EAAlB;;AACAkB,QAAQ,CAACC,IAAT,CAAcC,SAAd,GAA0B,UAAAb,CAAC;EACzBU,SAAS,CAACX,MAAV,CAAiBC,CAAjB,EAAoB,IAApB;;EACA,wEAAuBG,SAAS,CAACL,GAAV,CAAcE,CAAC,CAACJ,GAAhB,CAAvB,8BAA+C,EAA/C;IAAA;;IAAA,IAAWS,QAAX;IAAmDA,QAAQ,CAACK,SAAD,CAAR;;AACpD,CAHD;;AAIAC,QAAQ,CAACC,IAAT,CAAcE,OAAd,GAAwB,UAAAd,CAAC;EAAA,OAAIU,SAAS,CAACX,MAAV,CAAiBC,CAAjB,EAAoB,KAApB,CAAJ;AAAA,CAAzB;;AAEA,IAAMe,MAAM,GAAG,SAATA,MAAS,CAACnB,GAAD,EAAWS,QAAX;EAAA,OACbW,KAAK,CAACC,SAAN,CACE;IAAA,OAAMb,WAAW,CAACR,GAAD,EAAMS,QAAN,CAAjB;GADF,EAEE,CAACA,QAAD,EAAWT,GAAX,CAFF,CADa;AAAA,CAAf;;IAMasB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACrB,IAAD;EAAA,OAAiB,UAACQ,QAAD;IACjDU,MAAM,CAAClB,IAAI,CAACA,IAAI,CAACsB,MAAL,GAAc,CAAf,CAAL,EAAwBH,KAAK,CAACI,OAAN,CAAc;MAAA,OAAM,UAAAnB,KAAK;QACrD,KAAK,IAAIoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxB,IAAI,CAACsB,MAAL,GAAc,CAAlC,EAAqCE,CAAC,EAAtC,EAA0C;UACxC,IAAI,CAACpB,KAAK,CAACN,SAAN,CAAgBE,IAAI,CAACwB,CAAD,CAApB,CAAL,EAA+B;;;QAEjChB,QAAQ;OAJkC;KAAd,EAK3B,CAACA,QAAD,CAL2B,CAAxB,CAAN;GADgC;AAAA;IASrBiB,WAAW,GAAG,SAAdA,WAAc;EAAA,kCAAIC,KAAJ;IAAIA,KAAJ;;;EAAA,OAAoD,UAAClB,QAAD;IAAA,OAA0BkB,KAAK,CAACC,OAAN,CAAc,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACpB,QAAD,CAAL;KAAf,CAA1B;GAApD;AAAA;;;;;"}